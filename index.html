<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>midlifeonsol • Trading Dashboard</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:ital,wght@0,600;1,600&display=swap"
      rel="stylesheet"
    />

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ["Inter", "ui-sans-serif", "system-ui"],
              display: ["Playfair Display", "ui-serif", "Georgia"],
            },
            colors: {
              sea: {
                navy: "#060b14",
                teal: "#A2D1C1",
                mint: "#b4d8ca",
                tan: "#C99B6D",
                ink: "#0b1326",
              },
            },
            boxShadow: {
              glass:
                "0 10px 35px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.06)",
              glow: "0 0 0 1px rgba(180,216,202,.2), 0 0 35px rgba(180,216,202,.15)",
              mint: "0 0 22px rgba(180,216,202,.3)",
            },
          },
        },
      };
    </script>

    <style>
      :root {
        color-scheme: dark;
      }

      .glass {
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.06),
          rgba(255, 255, 255, 0.02)
        );
        border: 1px solid rgba(255, 255, 255, 0.09);
        backdrop-filter: blur(14px);
        -webkit-backdrop-filter: blur(14px);
      }

      .noise {
        position: fixed;
        inset: 0;
        pointer-events: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.18'/%3E%3C/svg%3E");
        mix-blend-mode: overlay;
        opacity: 0.35;
      }

      .gridlines {
        background-image: radial-gradient(
            circle at 20% 10%,
            rgba(162, 209, 193, 0.12) 0%,
            rgba(162, 209, 193, 0) 50%
          ),
          radial-gradient(
            circle at 80% 30%,
            rgba(201, 155, 109, 0.14) 0%,
            rgba(201, 155, 109, 0) 55%
          ),
          linear-gradient(
            rgba(255, 255, 255, 0.055) 1px,
            transparent 1px
          ),
          linear-gradient(
            90deg,
            rgba(255, 255, 255, 0.055) 1px,
            transparent 1px
          );
        background-size: auto, auto, 34px 34px, 34px 34px;
        background-position: center, center, center, center;
      }

      .ring-soft {
        box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.08);
      }

      @media (max-width: 640px) {
        .safe-area-padding { padding-left: env(safe-area-inset-left); padding-right: env(safe-area-inset-right); }
      }
    </style>
  </head>

  <body class="min-h-screen bg-sea-navy text-white gridlines">
    <div class="noise"></div>

    <main class="relative mx-auto w-full max-w-7xl px-3 pb-12 pt-6 sm:px-6 sm:pb-16 sm:pt-10 lg:px-8">
      <!-- HERO -->
      <section class="mb-10">
        <div class="flex flex-col gap-6">
          <div class="flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between">
            <div>
              <div class="inline-flex items-center gap-2">
                <span
                  class="h-2 w-2 rounded-full bg-sea-mint shadow-mint"
                ></span>
                <span class="text-[10px] tracking-[0.28em] text-white/70 sm:text-xs sm:tracking-[0.32em]">TRADING DASHBOARD</span>
              </div>
              <h1
                id="brandName"
                class="mt-2 font-display text-3xl font-semibold tracking-tight sm:mt-3 sm:text-4xl lg:text-5xl"
              >
                midlifeonsol
              </h1>
            </div>
            <div class="w-full sm:w-auto">
              <div class="glass ring-soft rounded-xl border border-sea-mint/20 px-3 py-2 shadow-glass sm:rounded-2xl sm:px-4 sm:py-3">
                <div class="text-[10px] text-sea-mint/80 sm:text-xs">Starting → Target</div>
                <div class="mt-0.5 flex items-baseline gap-1.5 sm:mt-1 sm:gap-2">
                  <div id="startBalancePill" class="text-xs font-semibold text-white sm:text-sm">$3,000</div>
                  <div class="text-[10px] text-white/40 sm:text-xs">to</div>
                  <div id="targetBalancePill" class="text-xs font-semibold text-sea-mint sm:text-sm">$15,000</div>
                </div>
              </div>
            </div>
          </div>

          <figure class="glass ring-soft rounded-3xl p-6 shadow-glass sm:p-8">
            <blockquote class="text-balance font-display text-xl italic leading-snug text-white/92 sm:text-2xl lg:text-3xl">
              <span class="text-sea-tan">“</span>
              <span id="missionText"></span>
              <span class="text-sea-tan">”</span>
            </blockquote>
            <figcaption class="mt-5 flex items-center justify-end gap-4 text-sm text-white/60">
              <span id="asOfDate" class="text-xs text-white/45"></span>
            </figcaption>
          </figure>
        </div>
      </section>

      <!-- TRACKER -->
      <section class="mb-10">
        <div class="grid grid-cols-1 gap-6 lg:grid-cols-12">
          <div class="glass ring-soft rounded-3xl p-6 shadow-glass lg:col-span-4 sm:p-8">
            <div>
              <div class="text-xs tracking-[0.32em] text-sea-mint/90">THE TRACKER</div>
              <div class="mt-3 text-white/70">Current streak</div>
            </div>

            <div class="mt-6">
              <div class="text-sm text-white/60">Day</div>
              <div class="mt-1 flex items-baseline gap-3">
                <div
                  id="dayCounter"
                  class="text-6xl font-semibold tracking-tight sm:text-7xl lg:text-8xl"
                >
                  1
                </div>
                <div class="pb-2 text-sm text-white/55">of the climb</div>
              </div>
            </div>

            <div class="mt-7 grid grid-cols-1 gap-4">
              <div class="glass rounded-2xl p-4 shadow-glass">
                <div class="text-xs text-white/55">Daily P&amp;L</div>
                <div class="mt-2 flex items-end justify-between gap-3">
                  <div id="dailyPnlValue" class="text-2xl font-semibold">+$0.00</div>
                  <div id="dailyPnlMeta" class="text-xs text-white/45"></div>
                </div>
              </div>
              <div class="glass rounded-2xl p-4 shadow-glass">
                <div class="text-xs text-white/55">Weekly %</div>
                <div class="mt-2 flex items-end justify-between gap-3">
                  <div id="weeklyPctValue" class="text-2xl font-semibold">+0.00%</div>
                  <div id="weeklyPctMeta" class="text-xs text-white/45"></div>
                </div>
              </div>
              <div class="glass rounded-2xl p-4 shadow-glass">
                <div class="text-xs text-white/55">Progress to $15k</div>
                <div class="mt-2">
                  <div class="flex items-end justify-between gap-3">
                    <div id="progressValue" class="text-2xl font-semibold">0%</div>
                    <div id="progressMeta" class="text-xs text-white/45"></div>
                  </div>
                  <div class="mt-3 h-2 w-full rounded-full bg-white/10">
                    <div
                      id="progressBar"
                      class="h-2 rounded-full bg-sea-teal shadow-[0_0_22px_rgba(162,209,193,.25)]"
                      style="width: 0%"
                    ></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="glass ring-soft rounded-2xl p-4 shadow-glass sm:rounded-3xl sm:p-6 lg:col-span-8 lg:p-8">
            <div class="flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between">
              <div>
                <div class="text-xs tracking-[0.32em] text-white/60">JOURNEY</div>
                <h2 class="mt-2 text-xl font-semibold tracking-tight sm:text-2xl">From $3k to $15k</h2>
                <div class="mt-1 text-sm text-white/60">
                  Live chart driven by <span class="font-mono text-white/70">data.js</span>
                </div>
              </div>
              <div class="flex flex-wrap items-center gap-3">
                <div class="rounded-2xl bg-white/5 px-4 py-3 ring-1 ring-white/10">
                  <div class="text-xs text-white/55">Current balance</div>
                  <div id="currentBalanceValue" class="mt-1 text-lg font-semibold">$0</div>
                </div>
                <a
                  id="ctaTransparency"
                  href="#ledger"
                  class="inline-flex items-center justify-center rounded-2xl bg-sea-mint px-4 py-3 text-sm font-semibold text-sea-navy shadow-glow transition hover:brightness-110 focus:outline-none focus:ring-2 focus:ring-sea-mint/50"
                >
                  View ledger
                </a>
              </div>
            </div>

            <div class="mt-6 overflow-hidden rounded-2xl border border-sea-mint/10 bg-white/[0.02] sm:rounded-3xl">
              <div class="relative h-[220px] px-4 pt-5 pb-2 sm:h-[280px] sm:px-5 sm:pt-6">
                <canvas id="progressChart"></canvas>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- RULES GRID -->
      <section class="mb-10">
        <div class="flex items-end justify-between gap-4">
          <div>
            <div class="text-xs tracking-[0.32em] text-white/60">RULES</div>
            <h2 class="mt-2 text-xl font-semibold tracking-tight sm:text-2xl">The four non-negotiables</h2>
          </div>
        </div>

        <div id="rulesGrid" class="mt-6 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4"></div>
      </section>

      <!-- TRANSACTION LEDGER -->
      <section id="ledger" class="mb-10">
        <div class="flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between">
          <div>
            <div class="text-xs tracking-[0.32em] text-white/60">TRANSACTION LEDGER</div>
            <h2 class="mt-2 text-xl font-semibold tracking-tight sm:text-2xl">Total transparency</h2>
            <div id="ledgerMeta" class="mt-1 text-sm text-white/60"></div>
          </div>
          <div class="flex flex-wrap items-center gap-3">
            <div class="glass rounded-2xl px-4 py-3 shadow-glass">
              <div class="text-xs text-white/55">Buys</div>
              <div id="buysCount" class="mt-1 text-lg font-semibold">0</div>
            </div>
            <div class="glass rounded-2xl px-4 py-3 shadow-glass">
              <div class="text-xs text-white/55">Sells</div>
              <div id="sellsCount" class="mt-1 text-lg font-semibold">0</div>
            </div>
          </div>
        </div>

        <div class="mt-6 overflow-hidden rounded-2xl border border-sea-mint/10 shadow-mint sm:rounded-3xl">
          <div class="glass overflow-x-auto">
            <table class="min-w-full border-collapse text-left">
              <thead>
                <tr class="bg-sea-mint/10 text-xs font-semibold uppercase tracking-wider text-sea-mint/95">
                  <th class="px-4 py-4 font-semibold first:rounded-tl-2xl sm:px-5">Ticker</th>
                  <th class="px-4 py-4 font-semibold sm:px-5">Type</th>
                  <th class="px-4 py-4 font-semibold sm:px-5">Shares</th>
                  <th class="px-4 py-4 font-semibold sm:px-5">Price</th>
                  <th class="px-4 py-4 font-semibold sm:px-5">Total</th>
                  <th class="px-4 py-4 font-semibold last:rounded-tr-2xl sm:px-5">Date</th>
                </tr>
              </thead>
              <tbody id="ledgerBody" class="divide-y divide-sea-mint/10"></tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- FOOTER -->
      <footer class="pt-6">
        <div class="glass ring-soft rounded-3xl px-6 py-5 shadow-glass sm:px-8">
          <div class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
            <div class="text-sm text-white/60">
              <span class="font-semibold text-white/80" id="footerBrand">midlifeonsol</span>
            </div>

            <div class="flex items-center gap-3">
              <a
                id="socialInstagram"
                class="group inline-flex items-center justify-center rounded-2xl bg-white/5 px-3 py-3 ring-1 ring-white/10 transition hover:bg-white/10"
                target="_blank"
                rel="noreferrer"
                aria-label="Instagram"
              >
                <i data-lucide="instagram" class="h-5 w-5 text-white/75 group-hover:text-sea-teal"></i>
              </a>
              <a
                id="socialX"
                class="group inline-flex items-center justify-center rounded-2xl bg-white/5 px-3 py-3 ring-1 ring-white/10 transition hover:bg-white/10"
                target="_blank"
                rel="noreferrer"
                aria-label="X"
              >
                <i data-lucide="twitter" class="h-5 w-5 text-white/75 group-hover:text-sea-mint"></i>
              </a>
              <a
                id="socialTikTok"
                class="group inline-flex items-center justify-center rounded-2xl bg-white/5 px-3 py-3 ring-1 ring-white/10 transition hover:bg-white/10"
                target="_blank"
                rel="noreferrer"
                aria-label="TikTok"
              >
                <i data-lucide="music-2" class="h-5 w-5 text-white/75 group-hover:text-sea-teal"></i>
              </a>
              <a
                id="socialYouTube"
                class="group inline-flex items-center justify-center rounded-2xl bg-white/5 px-3 py-3 ring-1 ring-white/10 transition hover:bg-white/10"
                target="_blank"
                rel="noreferrer"
                aria-label="YouTube"
              >
                <i data-lucide="youtube" class="h-5 w-5 text-white/75 group-hover:text-sea-mint"></i>
              </a>
            </div>
          </div>
        </div>
      </footer>
    </main>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@0.473.0/dist/umd/lucide.min.js"></script>

    <script type="module">
      import { tradingData } from "./data.js";

      const $ = (id) => document.getElementById(id);
      const fmtMoney = (n, opts = {}) => {
        const { maxDigits = 2 } = opts;
        return new Intl.NumberFormat("en-US", {
          style: "currency",
          currency: "USD",
          maximumFractionDigits: maxDigits,
        }).format(Number(n || 0));
      };
      const fmtPct = (n) =>
        `${(Number(n || 0) * 100).toFixed(2).replace("-0.00", "0.00")}%`;
      const signMoney = (n, digits = 2) => {
        const x = Number(n || 0);
        const abs = fmtMoney(Math.abs(x), { maxDigits: digits });
        return x >= 0 ? `+${abs}` : `-${abs}`;
      };

      const clamp01 = (x) => Math.max(0, Math.min(1, x));

      function latestDaily(dailyStats) {
        if (!Array.isArray(dailyStats) || dailyStats.length === 0) return null;
        return dailyStats[dailyStats.length - 1];
      }

      function weeklyChange(dailyStats) {
        if (!Array.isArray(dailyStats) || dailyStats.length < 2) {
          return { pct: 0, from: null, to: null, span: 0 };
        }
        const to = dailyStats[dailyStats.length - 1];
        const span = Math.min(7, dailyStats.length - 1);
        const from = dailyStats[dailyStats.length - 1 - span];
        const denom = Number(from.balance || 0);
        const pct = denom === 0 ? 0 : (Number(to.balance) - denom) / denom;
        return { pct, from, to, span };
      }

      function setText(id, value) {
        const el = $(id);
        if (el) el.textContent = value;
      }

      function setHtmlMultiline(id, value) {
        const el = $(id);
        if (!el) return;
        el.innerHTML = String(value || "").replace(/\n/g, "<br/>");
      }

      function colorizeValue(el, n) {
        if (!el) return;
        el.classList.remove("text-sea-mint", "text-sea-tan", "text-white");
        if (Number(n) > 0) el.classList.add("text-sea-mint");
        else if (Number(n) < 0) el.classList.add("text-sea-tan");
        else el.classList.add("text-white");
      }

        function renderHero() {
        setText("brandName", tradingData.brand || "midlifeonsol");
        setHtmlMultiline("missionText", tradingData.mission || "");

        setText("startBalancePill", fmtMoney(tradingData.startingBalance, { maxDigits: 0 }));
        setText("targetBalancePill", fmtMoney(tradingData.targetBalance, { maxDigits: 0 }));

        const last = latestDaily(tradingData.dailyStats);
        setText("asOfDate", last?.date ? `As of ${last.date}` : "");

        setText("footerBrand", tradingData.brand || "midlifeonsol");
        const footerSub = $("footerSub");
        if (footerSub) footerSub.textContent = "";
      }

      function renderTracker() {
        setText("dayCounter", String(tradingData.currentDay ?? 1));

        const last = latestDaily(tradingData.dailyStats);
        const dailyPnl = Number(last?.pnl ?? 0);
        const dailyEl = $("dailyPnlValue");
        setText("dailyPnlValue", signMoney(dailyPnl, 2));
        colorizeValue(dailyEl, dailyPnl);
        setText("dailyPnlMeta", last?.date ? last.date : "");

        const wk = weeklyChange(tradingData.dailyStats);
        const weeklyEl = $("weeklyPctValue");
        setText("weeklyPctValue", `${wk.pct >= 0 ? "+" : ""}${fmtPct(wk.pct)}`);
        colorizeValue(weeklyEl, wk.pct);
        setText(
          "weeklyPctMeta",
          wk.from?.date && wk.to?.date ? `${wk.from.date} → ${wk.to.date}` : ""
        );

        const currentBalance = Number(last?.balance ?? tradingData.startingBalance ?? 0);
        const start = Number(tradingData.startingBalance ?? 0);
        const target = Number(tradingData.targetBalance ?? 0);
        const denom = target - start;
        const progress = denom <= 0 ? 0 : clamp01((currentBalance - start) / denom);
        setText("progressValue", `${Math.round(progress * 100)}%`);
        setText("progressMeta", `${fmtMoney(currentBalance)} / ${fmtMoney(target, { maxDigits: 0 })}`);
        const bar = $("progressBar");
        if (bar) bar.style.width = `${progress * 100}%`;

        setText("currentBalanceValue", fmtMoney(currentBalance));
      }

      function renderRules() {
        const grid = $("rulesGrid");
        if (!grid) return;

        const rules = Array.isArray(tradingData.rules) ? tradingData.rules : [];
        grid.innerHTML = rules
          .map((r) => {
            const icon = r.icon || "sparkles";
            const title = r.title || "";
            const desc = r.description || "";
            return `
              <article class="glass ring-soft rounded-2xl p-4 shadow-glass transition hover:shadow-glow sm:rounded-3xl sm:p-5">
                <div class="flex items-start justify-between gap-4">
                  <div class="rounded-xl bg-sea-mint/15 p-2.5 ring-1 ring-sea-mint/20 sm:rounded-2xl sm:p-3">
                    <i data-lucide="${icon}" class="h-5 w-5 text-sea-mint"></i>
                  </div>
                  <div class="text-xs tracking-[0.32em] text-sea-mint/60">RULE</div>
                </div>
                <h3 class="mt-4 text-lg font-semibold tracking-tight">${title}</h3>
                <p class="mt-2 text-sm leading-relaxed text-white/65">${desc}</p>
              </article>
            `;
          })
          .join("");
      }

      function renderLedger() {
        const txs = Array.isArray(tradingData.transactions) ? tradingData.transactions : [];
        setText("ledgerMeta", `${txs.length} transactions pulled from data.js`);

        const buys = txs.filter((t) => String(t.type).toUpperCase() === "BUY").length;
        const sells = txs.filter((t) => String(t.type).toUpperCase() === "SELL").length;
        setText("buysCount", String(buys));
        setText("sellsCount", String(sells));

        const body = $("ledgerBody");
        if (!body) return;

        const safe = (s) =>
          String(s ?? "")
            .replaceAll("&", "&amp;")
            .replaceAll("<", "&lt;")
            .replaceAll(">", "&gt;")
            .replaceAll('"', "&quot;")
            .replaceAll("'", "&#039;");

        const typePill = (type) => {
          const t = String(type || "").toUpperCase();
          const isBuy = t === "BUY";
          const cls = isBuy
            ? "bg-sea-teal/15 text-sea-teal ring-1 ring-sea-teal/25"
            : "bg-sea-tan/15 text-sea-tan ring-1 ring-sea-tan/25";
          return `<span class="inline-flex items-center rounded-xl px-3 py-1 text-xs font-semibold ${cls}">${safe(
            t || "—"
          )}</span>`;
        };

        const priceDigits = (n) => (Number(n) >= 1 ? 2 : 8);
        const num = (n) => Number(n ?? 0);
        const fmt = (n, digits) =>
          new Intl.NumberFormat("en-US", {
            minimumFractionDigits: digits,
            maximumFractionDigits: digits,
          }).format(num(n));

        body.innerHTML = txs
          .slice()
          .reverse()
          .map((t, i) => {
            const digits = priceDigits(t.price);
            const even = i % 2 === 0;
            const rowCls = even
              ? "bg-white/[0.02] hover:bg-sea-mint/10"
              : "hover:bg-sea-mint/10";
            const cellCls = "px-4 py-3.5 text-sm sm:px-5 sm:py-4";
            return `
              <tr class="${rowCls} text-white/80 transition-colors">
                <td class="${cellCls} font-semibold text-white">${safe(t.ticker)}</td>
                <td class="${cellCls}">${typePill(t.type)}</td>
                <td class="${cellCls} tabular-nums">${fmt(t.shares, 4).replace(/\.?0+$/, "")}</td>
                <td class="${cellCls} font-mono text-white/75">$${fmt(t.price, digits)}</td>
                <td class="${cellCls} font-semibold text-sea-mint/95">${fmtMoney(t.total, { maxDigits: 2 })}</td>
                <td class="${cellCls} text-white/60">${safe(t.date)}</td>
              </tr>
            `;
          })
          .join("");
      }

      function renderSocials() {
        const s = tradingData.socials || {};
        const setHref = (id, href) => {
          const el = $(id);
          if (el) el.href = href || "#";
        };
        setHref("socialInstagram", s.instagram);
        setHref("socialX", s.x);
        setHref("socialTikTok", s.tiktok);
        setHref("socialYouTube", s.youtube);
      }

      function renderChart() {
        const canvas = $("progressChart");
        if (!canvas) return;

        const stats = Array.isArray(tradingData.dailyStats) ? tradingData.dailyStats : [];
        const labels = stats.map((d) => {
          const s = String(d.date || "");
          if (s.length >= 10) {
            const m = s.slice(5, 7);
            const day = s.slice(8, 10);
            const months = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
            const mon = months[parseInt(m, 10) - 1] || m;
            return `${mon} ${parseInt(day, 10)}`;
          }
          return s;
        });
        const values = stats.map((d) => Number(d.balance ?? 0));

        const ctx = canvas.getContext("2d");
        const chartH = 240;
        const gradient = ctx.createLinearGradient(0, 0, 0, chartH);
        gradient.addColorStop(0, "rgba(180, 216, 202, 0.5)");
        gradient.addColorStop(0.4, "rgba(180, 216, 202, 0.18)");
        gradient.addColorStop(0.85, "rgba(180, 216, 202, 0.04)");
        gradient.addColorStop(1, "rgba(180, 216, 202, 0)");

        const start = Number(tradingData.startingBalance ?? 0);
        const target = Number(tradingData.targetBalance ?? 0);

        if (window.__midlifeChart) window.__midlifeChart.destroy();

        window.__midlifeChart = new Chart(ctx, {
          type: "line",
          data: {
            labels,
            datasets: [
              {
                label: "Balance",
                data: values,
                borderColor: "#b4d8ca",
                backgroundColor: gradient,
                fill: true,
                borderWidth: 2.5,
                pointRadius: 4,
                pointHoverRadius: 8,
                pointBackgroundColor: "#060b14",
                pointBorderColor: "#b4d8ca",
                pointBorderWidth: 2,
                pointHoverBackgroundColor: "#b4d8ca",
                pointHoverBorderColor: "#060b14",
                pointHoverBorderWidth: 2,
                tension: 0.4,
              },
              {
                label: "Start",
                data: labels.map(() => start),
                borderColor: "rgba(201, 155, 109, 0.5)",
                borderWidth: 1.5,
                borderDash: [8, 6],
                pointRadius: 0,
              },
              {
                label: "Target",
                data: labels.map(() => target),
                borderColor: "rgba(201, 155, 109, 0.75)",
                borderWidth: 1.5,
                borderDash: [6, 6],
                pointRadius: 0,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            layout: {
              padding: { top: 8, right: 12, bottom: 4, left: 4 },
            },
            interaction: {
              intersect: false,
              mode: "index",
            },
            plugins: {
              legend: {
                position: "top",
                align: "end",
                labels: {
                  color: "rgba(255,255,255,0.7)",
                  usePointStyle: true,
                  pointStyle: "circle",
                  padding: 16,
                  font: { size: 12 },
                },
              },
              tooltip: {
                backgroundColor: "rgba(6, 11, 20, 0.95)",
                titleColor: "rgba(180, 216, 202, 0.95)",
                bodyColor: "rgba(255,255,255,0.85)",
                borderColor: "rgba(180, 216, 202, 0.25)",
                borderWidth: 1,
                padding: 12,
                cornerRadius: 10,
                displayColors: true,
                callbacks: {
                  label: (ctx) => {
                    const y = ctx.parsed.y;
                    if (ctx.dataset.label === "Balance") return ` Balance: ${fmtMoney(y)}`;
                    if (ctx.dataset.label === "Start") return ` Start: ${fmtMoney(y, { maxDigits: 0 })}`;
                    if (ctx.dataset.label === "Target") return ` Target: ${fmtMoney(y, { maxDigits: 0 })}`;
                    return ` ${ctx.dataset.label}: ${fmtMoney(y)}`;
                  },
                },
              },
            },
            scales: {
              x: {
                ticks: {
                  color: "rgba(255,255,255,0.5)",
                  maxRotation: 0,
                  autoSkip: true,
                  maxTicksLimit: 8,
                  font: { size: 11 },
                  padding: 6,
                },
                grid: { display: false },
                border: { display: false },
              },
              y: {
                ticks: {
                  color: "rgba(255,255,255,0.5)",
                  callback: (v) => fmtMoney(v, { maxDigits: 0 }),
                  maxTicksLimit: 6,
                  font: { size: 11 },
                  padding: 8,
                },
                grid: {
                  color: "rgba(255,255,255,0.06)",
                  drawTicks: false,
                },
                border: { display: false },
              },
            },
          },
        });
      }

      function boot() {
        renderHero();
        renderTracker();
        renderRules();
        renderLedger();
        renderSocials();
        renderChart();

        // Lucide icon hydration
        if (window.lucide?.createIcons) window.lucide.createIcons();
      }

      boot();
    </script>
  </body>
</html>

